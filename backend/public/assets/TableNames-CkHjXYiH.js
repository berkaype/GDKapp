import{r as d,g as j,j as e,a as N}from"./index-BCHfetxX.js";const x=j();function v(){const[i,l]=d.useState([]),[c,o]=d.useState(!1),[m,n]=d.useState("");d.useEffect(()=>{(async()=>{try{const a=await fetch(`${x}/table-names`);if(!a.ok)throw new Error("load-failed");const s=await a.json();l(Array.isArray(s?.tables)?s.tables:[])}catch{n("Masa isimleri yüklenemedi.")}})()},[]);const h=(a,s)=>{l(t=>t.map(r=>r.id===a?{...r,name:s}:r))},p=()=>{const a=i.map(t=>t.id);let s=1;for(;a.includes(s);)s+=1;l(t=>[...t,{id:s,name:`Masa ${s}`}].sort((r,u)=>r.id-u.id))},y=a=>{l(s=>s.filter(t=>t.id!==a))},b=async()=>{o(!0),n("");try{const a={tables:i.map(r=>({id:r.id,name:(r.name||"").trim()}))},s=await fetch(`${x}/table-names`,{method:"PUT",headers:{"Content-Type":"application/json",...N()},body:JSON.stringify(a)});if(!s.ok)throw new Error("save-failed");const t=await s.json();l(Array.isArray(t?.tables)?t.tables:i)}catch{n("Kaydedilemedi. Yetki veya sunucu hatası.")}finally{o(!1)}};return e.jsx("div",{className:"p-4 space-y-4",children:e.jsxs("div",{className:"bg-white rounded p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Masa İsimleri"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:p,className:"px-3 py-2 border rounded hover:bg-gray-50",children:"+ Masa Ekle"}),e.jsx("button",{onClick:b,disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded disabled:opacity-60",children:c?"Kaydediliyor...":"Kaydet"})]})]}),m&&e.jsx("div",{className:"text-sm text-red-600 mb-3",children:m}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600 border-b",children:[e.jsx("th",{className:"py-2 pr-4",children:"Masa ID"}),e.jsx("th",{className:"py-2 pr-4",children:"İsim"}),e.jsx("th",{className:"py-2 pr-4 text-right",children:"İşlem"})]})}),e.jsx("tbody",{children:i.map(a=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 pr-4 w-24",children:a.id}),e.jsx("td",{className:"py-2 pr-4",children:e.jsx("input",{className:"border rounded px-2 py-1 w-full",value:a.name||"",onChange:s=>h(a.id,s.target.value)})}),e.jsx("td",{className:"py-2 pr-4 text-right",children:e.jsx("button",{onClick:()=>y(a.id),className:"text-red-600 hover:underline",children:"Sil"})})]},a.id))})]})}),e.jsx("div",{className:"text-xs text-gray-500 mt-3",children:"Not: Masa ID siparişlerde kullanılır; mevcut açık adisyonlar etkilenmez."})]})})}export{v as default};
